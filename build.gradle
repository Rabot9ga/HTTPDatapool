buildscript {
    ext {
        springBootVersion = '1.5.9.RELEASE'
    }
    repositories {
        maven {
            url 'http://pprb-oip-tn-4.ca.sbrf.ru:8081/artifactory/atrifactory-gradle-repo'
            credentials {
                username = "${artifactory_user}"
                password = "${artifactory_password}"
            }
        }
//        maven {
//			url "http://sbtnexus.ca.sbrf.ru:8081/nexus/content/repositories/jcenter/"
//		}
//		maven {
//			url "http://sbtnexus.ca.sbrf.ru:8081/nexus/content/repositories/central/"
//		}
    }
    dependencies {
        classpath("org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}")
        //Check for the latest version here: http://plugins.gradle.org/plugin/com.jfrog.artifactory
        classpath "org.jfrog.buildinfo:build-info-extractor-gradle:4.6.2"
    }
}

apply plugin: 'java'
apply plugin: 'idea'
apply plugin: 'org.springframework.boot'
apply plugin: "com.jfrog.artifactory"
apply plugin: 'maven-publish'

group = 'ru.sbt.util'
version = '0.0.1-SNAPSHOT'
sourceCompatibility = 1.8

repositories {
    maven {
        url 'http://pprb-oip-tn-4.ca.sbrf.ru:8081/artifactory/atrifactory-gradle-repo'
        credentials {
            username = "${artifactory_user}"
            password = "${artifactory_password}"
        }
    }

    maven {
        url "http://sbtnexus.ca.sbrf.ru:8081/nexus/content/repositories/central/"
    }
    maven {
        url "http://sbtnexus.ca.sbrf.ru:8081/nexus/content/repositories/AC_COM_thirdparty/"
    }
    maven {
        url "http://sbtnexus.ca.sbrf.ru:8081/nexus/content/repositories/jcenter/"
    }
}

springBoot {
    executable = true
    embeddedLaunchScriptProperties =
            [mode     : 'service',
             pidFolder: 'pid/',
             logFolder: 'log/'
            ]

}


dependencies {
    compile('org.springframework.boot:spring-boot-starter-actuator')
    compile('org.springframework.boot:spring-boot-starter-jdbc')
    compile('org.springframework.boot:spring-boot-starter-web')
    compile('com.oracle.jdbc:ojdbc7:12.1.0.2')
    compile('org.apache.commons:commons-lang3:3.6')
    runtime('org.springframework.boot:spring-boot-devtools')
//	runtime('org.postgresql:postgresql')

    compileOnly('org.projectlombok:lombok')
    testCompileOnly('org.projectlombok:lombok')
    testCompile('org.springframework.boot:spring-boot-starter-test')
    testCompile('org.testng:testng:6.9.9')

    testCompile('com.squareup.retrofit2:retrofit:2.3.0')
    testCompile('com.squareup.retrofit2:converter-jackson:2.3.0')
}

publishing {
    publications {
        mavenJava(MavenPublication) {
            from components.java
        }
    }
}

artifactory {
    contextUrl = "${artifactory_contextUrl}"   //The base Artifactory URL if not overridden by the publisher/resolver

    publish {
        repository {
            repoKey = 'ontar-repo'
            username = "${artifactory_user}"
            password = "${artifactory_password}"
            maven = true

        }
        defaults {
            publications('mavenJava')
            publishArtifacts = true
            publishPom = true
        }
    }
    resolve {
        repository {
            repoKey = 'atrifactory-gradle-repo'
            username = "${artifactory_user}"
            password = "${artifactory_password}"
            maven = true

        }
    }
}




